(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d3b5709","chunk-2d0c4819","chunk-2d0cfe07"],{"0642":function(t,e,o){"use strict";var n=o("b6d0"),i=o.n(n);i.a},"3ab7":function(t,e,o){"use strict";o.r(e);var n=["info","error","success","warning","question","back","arrow-left","arrow-down","arrow-right","arrow-up","caret-left","caret-bottom","caret-top","caret-right","d-arrow-left","d-arrow-right","minus","plus","remove","circle-plus","remove-outline","circle-plus-outline","close","check","circle-close","circle-check","circle-close-outline","circle-check-outline","zoom-out","zoom-in","d-caret","sort","sort-down","sort-up","tickets","document","goods","sold-out","news","message","date","printer","time","bell","mobile-phone","service","view","menu","more","more-outline","star-on","star-off","location","location-outline","phone","phone-outline","picture","picture-outline","delete","search","edit","edit-outline","rank","refresh","share","setting","upload","upload2","download","loading"];e["default"]=n},"661b":function(t,e,o){"use strict";o.r(e);o("4917"),o("ac6a");var n=o("51ff"),i=function(t){return t.keys()},r=/\.\/(.*)\.svg/,a=i(n).map((function(t){return t.match(r)[1]}));e["default"]=a},a615:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("div",{staticClass:"filter-container"},[o("el-button",{staticClass:"filter-item",attrs:{type:"success"},on:{click:t.newMenu}},[t._v("\n      新增菜单\n    ")])],1),t._v(" "),o("el-table",{attrs:{data:t.menuData,"row-key":"id",border:"","tree-props":{children:"children",hasChildren:"hasChildren"}}},[o("el-table-column",{attrs:{label:"菜单名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.meta.title))]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"path",label:"请求路径"}}),t._v(" "),o("el-table-column",{attrs:{prop:"component",label:"组件地址"}}),t._v(" "),o("el-table-column",{attrs:{prop:"rank",label:"菜单排序"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.edit(e.$index,e.row)}}},[t._v("\n          编辑\n        ")]),t._v(" "),o("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.handleDelete(e.$index,e.row)}}},[t._v("\n          删除\n        ")])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:t.isEdit?"编辑菜单":"新增菜单",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"请选择显示位置","label-width":t.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择显示位置"},on:{change:t.changeLocation},model:{value:t.form.pid,callback:function(e){t.$set(t.form,"pid",e)},expression:"form.pid"}},[o("el-option",{staticStyle:{"font-weight":"bold"},attrs:{label:"顶级菜单",value:0}}),t._v(" "),t._l(t.setMenuList,(function(t,e){return o("el-option",{key:e,attrs:{label:t.title,value:t.id}})}))],2)],1),t._v(" "),o("el-form-item",{attrs:{label:"菜单名称","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"如：财务管理"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"菜单地址","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"如：system"},model:{value:t.form.path,callback:function(e){t.$set(t.form,"path",e)},expression:"form.path"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"组件地址","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"如：charts/line"},model:{value:t.form.component,callback:function(e){t.$set(t.form,"component",e)},expression:"form.component"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"菜单排序","label-width":t.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:"如：100"},model:{value:t.form.rank,callback:function(e){t.$set(t.form,"rank",e)},expression:"form.rank"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"图标","label-width":t.formLabelWidth}},[o("el-popover",{attrs:{placement:"bottom-start",width:"485",trigger:"click"},on:{show:function(e){return t.$refs["iconSelect"].reset()}}},[o("IconSelect",{ref:"iconSelect",on:{selected:t.selected}}),t._v(" "),o("el-input",{staticStyle:{width:"485px"},attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},slot:"reference",model:{value:t.form.icon,callback:function(e){t.$set(t.form,"icon",e)},expression:"form.icon"}},[t.form.icon?o("svg-icon",{staticClass:"el-input__icon",staticStyle:{height:"32px",width:"16px"},attrs:{slot:"prefix","icon-class":t.form.icon},slot:"prefix"}):o("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"prefix"},slot:"prefix"})],1)],1)],1),t._v(" "),"0"==t.form.pid?o("el-form-item",{attrs:{label:"一直显示根菜单","label-width":t.formLabelWidth}},[o("el-radio",{attrs:{label:"1"},model:{value:t.form.alwaysShow,callback:function(e){t.$set(t.form,"alwaysShow",e)},expression:"form.alwaysShow"}},[t._v("是")]),t._v(" "),o("el-radio",{attrs:{label:"0"},model:{value:t.form.alwaysShow,callback:function(e){t.$set(t.form,"alwaysShow",e)},expression:"form.alwaysShow"}},[t._v("否")])],1):t._e()],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.confirm}},[t._v("确 定")])],1)],1)],1)},i=[],r=(o("7f7f"),o("ac6a"),o("6817")),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"icon-body"},[o("el-input",{staticStyle:{position:"relative"},attrs:{clearable:"",placeholder:"请输入图标名称"},on:{clear:t.filterIcons},nativeOn:{input:function(e){return t.filterIcons(e)}},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}},[o("i",{staticClass:"el-icon-search el-input__icon",attrs:{slot:"suffix"},slot:"suffix"})]),t._v(" "),o("div",{staticClass:"icon-list"},t._l(t.iconList,(function(e,n){return o("div",{key:n,on:{click:function(o){return t.selectedIcon(e)}}},[o("svg-icon",{staticStyle:{height:"30px",width:"16px"},attrs:{"icon-class":e}}),t._v(" "),o("span",[t._v(t._s(e))])],1)})),0)],1)},l=[],s=(o("6762"),o("2fdb"),o("4917"),o("51ff")),c=function(t){return t.keys()},f=/\.\/(.*)\.svg/,u=c(s).map((function(t){return t.match(f)[1]})),m=u,d={name:"IconSelect",data:function(){return{name:"",iconList:m}},methods:{filterIcons:function(){var t=this;this.name?this.iconList=this.iconList.filter((function(e){return e.includes(t.name)})):this.iconList=m},selectedIcon:function(t){this.$emit("selected",t),document.body.click()},reset:function(){this.name="",this.iconList=m}}},h=d,p=(o("d43e"),o("2877")),b=Object(p["a"])(h,a,l,!1,null,"2f5f09b8",null),v=b.exports,w=o("661b"),g=o("3ab7"),k=o("c46f"),_={components:{IconSelect:v},data:function(){return{isEdit:!1,svgIcons:w["default"],elementIcons:g["default"],showIcons:!1,menuData:[],setMenuList:[],dialogFormVisible:!1,form:{title:"",path:"",component:"",alwaysShow:"1",pid:0,icon:"",rank:""},rules:{title:[{required:!0,message:"请输入名称",trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件地址",trigger:"blur"}]},formLabelWidth:"130px"}},computed:{},mounted:function(){this.refreshMenu()},methods:{newMenu:function(){var t=this;t.dialogFormVisible=!0,t.resetForm()},resetForm:function(){this.form={title:"",path:"",component:"",alwaysShow:"1",pid:0,icon:"",rank:""}},changeLocation:function(){var t=this;0===t.form.pid?t.form.alwaysShow="1":t.form.alwaysShow="0"},confirm:function(){var t=this;t.$refs["form"].validate((function(e){if(!e)return!1;t.isEdit?(t.changeLocation(),Object(r["c"])(t.form).then((function(e){"ok"===e.status&&(t.dialogFormVisible=!1,t.resetForm(),t.refreshMenu()),t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}))):(t.changeLocation(),Object(r["a"])(t.form).then((function(e){"ok"===e.status&&(t.dialogFormVisible=!1,t.resetForm(),t.refreshMenu()),t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})})))}))},selected:function(t){this.form.icon=t},generateIconCode:function(t){return'<svg-icon icon-class="'.concat(t,'" />')},refreshMenu:function(){var t=this;Object(r["d"])(["admin"]).then((function(e){"ok"===e.status?(e.data.forEach((function(t){t.children&&t.children.length>0&&(t.children=k["a"].filter(k["a"].sortBy(t.children,"rank").reverse()))})),t.menuData=k["a"].filter(k["a"].sortBy(e.data,"rank").reverse(),(function(t){return!0!==t.hidden})),t.setMenuList=k["a"].map(t.menuData,(function(t){return{id:t.id,pid:t.pid,title:t.meta.title}}))):t.$message.error(e.data.info.msg)}))},handleDelete:function(t,e){var o=this,n=this;this.$confirm("此操作将永久删除"+e.name+"和它的子菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(r["b"])({id:e.id}).then((function(t){"ok"===t.status&&(n.$alert(t.data.msg,"提示",{confirmButtonText:"确定"}),n.refreshMenu())}))})).catch((function(){o.$message({type:"info",message:"已取消删除"})}))},edit:function(t,e){var o=this;o.dialogFormVisible=!0,o.isEdit=!0,o.resetForm(),o.form.pid=e.pid,o.form.id=e.id,o.form.title=e.name,o.form.path=e.path,o.form.component=e.component,o.form.alwaysShow=e.alwaysShow?"1":"0",o.form.icon=e.meta.icon,o.form.rank=e.rank},changeValue:function(t){console.log(this.form)}}},y=_,x=(o("0642"),Object(p["a"])(y,n,i,!1,null,"10baab6d",null));e["default"]=x.exports},b6d0:function(t,e,o){},d376:function(t,e,o){},d43e:function(t,e,o){"use strict";var n=o("d376"),i=o.n(n);i.a}}]);