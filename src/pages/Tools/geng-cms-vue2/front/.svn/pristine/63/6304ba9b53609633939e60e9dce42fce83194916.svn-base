(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a38b384"],{4569:function(t,e,i){},a3c2:function(t,e,i){"use strict";var n=i("4569"),a=i.n(n);a.a},c1a4:function(t,e,i){"use strict";i.d(e,"d",(function(){return a})),i.d(e,"a",(function(){return o})),i.d(e,"c",(function(){return r})),i.d(e,"b",(function(){return s}));var n=i("b775");function a(){return Object(n["a"])({url:"admin/customForms/getForms",method:"post"})}function o(t){return Object(n["a"])({url:"admin/customForms/createForm",method:"post",data:t})}function r(t){return Object(n["a"])({url:"admin/customForms/editForm",method:"post",data:t})}function s(t){return Object(n["a"])({url:"admin/customForms/deteleForm",method:"post",data:t})}},ea6f:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{padding:"30px"}},[i("div",{staticStyle:{height:"50px"}},[i("el-button",{attrs:{type:"primary"},on:{click:t.newForm}},[t._v("新建表单")])],1),t._v(" "),i("el-dialog",{attrs:{title:"表单预览",visible:t.quickViewForm,width:"60%",center:""},on:{"update:visible":function(e){t.quickViewForm=e}}},[i("div",{staticClass:"a"},[i("fm-generate-form",{ref:"generateViewForm",attrs:{data:t.jsonViewData,value:t.editViewData,edit:!1},on:{"on-change":t.onChange}})],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.quickViewForm=!1}}},[t._v("确 定")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.viewData}},[t._v("查看数据")])],1)]),t._v(" "),t.displayEditList?i("div",{},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{prop:"id",label:"编号",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"name",label:"名字",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{prop:"create_time",label:"创建时间",width:"180"}}),t._v(" "),i("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleView(e.$index,e.row)}}},[t._v("查看")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!1,2921740556)})],1)],1):t._e(),t._v(" "),[t.displayForm?i("fm-making-form",{ref:"makingform",staticStyle:{height:"calc(100vh - 194px)"},attrs:{preview:"","generate-code":!1,"generate-json":!0,upload:!1}},[i("template",{slot:"action"},[i("div",{staticClass:"codeWrap"},[i("el-tag",{staticStyle:{"font-size":"13px","margin-right":"10px"},attrs:{effect:"dark",type:"primary"}},[t._v(t._s(t.isEdit?"正在编辑":"正在新建"))]),t._v(" "),i("el-input",{staticClass:"code",attrs:{placeholder:"请输入表单名字",size:"mini"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}}),t._v(" "),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.saveServer}},[t._v("提交")]),t._v(" "),t.displayForm?i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:t.back}},[t._v("取消")]):t._e()],1)])],2):t._e()]],2)},a=[],o=(i("7f7f"),i("c1a4")),r=i("61f7"),s={data:function(){return{jsonViewData:{list:[],config:{labelWidth:100,labelPosition:"right",size:"small"}},editViewData:{myname:""},form:{name:"",id:"",json:""},quickViewForm:!1,displayForm:!1,displayEditList:!0,tableData:[],isEdit:!1}},mounted:function(){this.initData()},methods:{onChange:function(t,e){console.log(t),console.log(e)},viewData:function(){console.log(JSON.stringify(this.editViewData))},initData:function(){var t=this;Object(o["d"])().then((function(e){console.log(e),t.tableData=e.data}))},resetForm1:function(){var t=this;t.$nextTick((function(){t.form.id="",t.form.name="",t.form.json="",t.$refs.makingform.setJSON({list:[],config:{labelWidth:100,labelPosition:"right",size:"small"}})}))},resetForm2:function(){var t=this;t.form.id="",t.form.name="",t.form.json="",t.$refs.makingform.setJSON({list:[],config:{labelWidth:100,labelPosition:"right",size:"small"}})},back:function(){var t=this;t.displayForm=!1,t.displayEditList=!0},handleDelete:function(t,e){var i=this,n=this;this.$confirm("此操作将永久删除"+e.name+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(o["b"])({id:e.id}).then((function(t){"ok"===t.status&&(n.$alert(t.data.msg,"提示",{confirmButtonText:"确定"}),n.back(),n.initData())}))})).catch((function(){i.$message({type:"info",message:"已取消删除"})}))},handleView:function(t,e){var i=this;i.quickViewForm=!0,i.jsonViewData=JSON.parse(e.json)},handleEdit:function(t,e){var i=this;i.displayForm=!0,i.displayEditList=!1,i.isEdit=!0,i.$nextTick((function(t){i.form.name=e.name,i.form.id=e.id,i.form.json=e.json,i.$refs.makingform.setJSON(JSON.parse(e.json))}))},saveLocal:function(){var t=this.$refs.makingform.getJSON();this.form.json=t},saveServer:function(){var t=this;t.saveLocal();var e={name:t.form.name},i=Object(r["c"])(e,["表单名"],this);i&&(t.form.json=JSON.stringify(t.form.json),t.isEdit?Object(o["c"])(t.form).then((function(e){"ok"===e.status&&(t.back(),t.initData()),t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})})):Object(o["a"])(t.form).then((function(e){"ok"===e.status&&(t.back(),t.initData()),t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})})))},newForm:function(){var t=this;t.displayForm=!0,t.displayEditList=!1,t.isEdit=!1,t.resetForm1()}}},c=s,l=(i("a3c2"),i("2877")),m=Object(l["a"])(c,n,a,!1,null,"15c7dcfc",null);e["default"]=m.exports}}]);